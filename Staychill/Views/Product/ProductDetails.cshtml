@model Staychill.Models.ProductModel.Product

@{
    ViewData["Title"] = "Product Details";
}

<div style="display: flex; flex-direction: row; gap: 20px;">
    <!-- โซนแสดงภาพสินค้า -->
    <div style="flex: 1;">
        @if (Model.Images != null && Model.Images.Image1 != null)
        {
            <img src="@($"data:image/png;base64,{Convert.ToBase64String(Model.Images.Image1)}")" alt="Main Image" style="width: 100%; height: auto;" />
        }
        else
        {
            <p>No Image Available</p>
        }
    </div>

    <!-- โซนแสดงรายละเอียดสินค้า -->
    <div style="flex: 1;">
        <h2>@Model.ProductName</h2>
        <p>@Model.Description</p>

        <!-- โซนกรองสี -->
        <p><strong>Color:</strong></p>
        <div style="display: flex; gap: 10px;">
            @if (ViewBag.RelatedColors != null)
            {
                foreach (var colorItem in ViewBag.RelatedColors)
                {
                    <a asp-action="ProductDetails" asp-route-id="@colorItem.Id" style="text-decoration: none;">
                        <span style="display: inline-block; width: 20px; height: 20px; background-color: @colorItem.Color; border-radius: 50%; border: 1px solid #000; cursor: pointer;" title="@colorItem.Color"></span>
                    </a>
                }
            }
        </div>

        <!-- ฟอร์มเพิ่มสินค้า -->
        <div style="margin-top: 20px;">
            <form asp-action="CartIndex" asp-controller="Cart" method="post">
                <input type="hidden" name="productId" value="@Model.Id" />
                <label for="quantity">Quantity:</label>
                <button type="button" onclick="this.nextElementSibling.stepDown()">-</button>
                <input type="number" name="quantity" value="1" min="1" max="@Model.Instock" style="width: 50px; text-align: center;" />
                <button type="button" onclick="this.previousElementSibling.stepUp()">+</button>
                <button type="submit" style="margin-left: 20px;">Add to Cart</button>
            </form>
        </div>
    </div>
</div>

<!-- โซนแสดงภาพเพิ่มเติม -->
<div style="margin-top: 30px;">
    <div style="display: flex; gap: 10px;">
        @if (Model.Images != null)
        {
            if (Model.Images.Image2 != null)
            {
                <img src="@($"data:image/png;base64,{Convert.ToBase64String(Model.Images.Image2)}")" alt="Image 2" style="width: 100px; height: auto;" />
            }
            if (Model.Images.Image3 != null)
            {
                <img src="@($"data:image/png;base64,{Convert.ToBase64String(Model.Images.Image3)}")" alt="Image 3" style="width: 100px; height: auto;" />
            }
            if (Model.Images.Image4 != null)
            {
                <img src="@($"data:image/png;base64,{Convert.ToBase64String(Model.Images.Image4)}")" alt="Image 4" style="width: 100px; height: auto;" />
            }
        }
    </div>
</div>

<!-- โซนแสดงสินค้าอื่นๆ ที่สุ่มมา -->
<div style="margin-top: 30px;">
    <h3>Others</h3>
    <div style="display: flex; gap: 10px;">
        @if (ViewBag.OtherProducts != null)
        {
            foreach (var otherProduct in ViewBag.OtherProducts)
            {
                <div style="flex: 1; text-align: center;">
                    <!-- คลิกที่รูปภาพเพื่อไปที่หน้ารายละเอียดสินค้า -->
                    @if (otherProduct.Images != null && otherProduct.Images.Image1 != null)
                    {
                        var base64Image = Convert.ToBase64String(otherProduct.Images.Image1);
                        <a href="@Url.Action("ProductDetails", "Product", new { id = otherProduct.Id })">
                            <!-- แสดงรูปภาพโดยไม่มีกรอบ -->
                            <img src="@($"data:image/png;base64,{base64Image}")" alt="Image1" style="width: 100px; height: auto;" />
                        </a>
                    }
                    else
                    {
                        <p>No Image Available</p> <!-- แสดงข้อความหากไม่มีรูปภาพ -->
                    }
                </div>
            }
        }
        else
        {
            <p>No other products available.</p>
        }
    </div>
</div>



<a asp-action="ProductMainPage" style="margin-top: 20px; display: block;">Back</a> 